{% assign review_section = product.metafields.custom.main_review_section.value %}
{% if review_section != blank and review_section.review != blank %}

{% assign reviews = review_section.review.value %}
{% assign total_reviews = reviews.size %}
{% assign half = total_reviews | divided_by: 2 %}

<style>
.fb-reviews{
  padding: 0px 20px 80px 20px;
  background:#fff;
}
.fb-title{
  text-align:center;
  font-size:42px;
  font-weight:700;
  color:#000;
}
.fb-desc{
  text-align:center;
  max-width:700px;
  margin:15px auto 50px;
  color:#555;
}
.fb-grid{
  display:grid;
  grid-template-columns:1fr auto 1fr;
  gap:40px;
  align-items:center;
}
.fb-col{
  display:flex;
  flex-direction:column;
  gap:20px;
}
.fb-card{
  background:#f1f3f5;
  border-radius:16px;
  padding:20px;
}
.fb-header{
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom:10px;
}
.fb-header img{
  width:42px;
  height:42px;
  border-radius:50%;
}
.fb-card p{
  font-size:14px;
  color:#333;
}
.fb-center img{
  max-width:320px;
  border-radius:20px;
}
.fb-set + p {
  margin: 0;
  padding: 0;
}
.fb-card + p {
    margin-bottom: -30px;
}
@media(max-width:991px){
  .fb-grid{
    grid-template-columns:1fr;
  }
  .fb-center{
    text-align:center;
  }
}
</style>

<section class="fb-reviews">
  <div class="container">

    <h2 class="fb-title">{{ review_section.section_title }}</h2>
    <p class="fb-desc">{{ review_section.section_description }}</p>

    <div class="fb-grid">

      <!-- LEFT REVIEWS -->
      <div class="fb-col">
        {% for review in reviews limit: half %}
          <div class="fb-card">
            <div class="fb-header">
              <img src="{{ review.image | image_url: width: 80 }}">
              <strong>{{ review.title }}</strong>
            </div>
            <p>{{ review.text }}</p>
          </div>
          <p>{{ review.like_icon }}</p>
        {% endfor %}
      </div>

      <!-- CENTER IMAGE -->
      <div class="fb-center">
        <img src="{{ review_section.section_image | image_url: width: 600 }}">
      </div>

      <!-- RIGHT REVIEWS -->
      <div class="fb-col">
        {% for review in reviews offset: half %}
          <div class="fb-card">
            <div class="fb-header">
              <img src="{{ review.image | image_url: width: 80 }}">
              <strong>{{ review.title }}</strong>
            </div>
            <p>{{ review.text }}</p>
          </div>
          <p>{{ review.like_icon }}</p>
        {% endfor %}
      </div>

    </div>
  </div>
</section>

{% endif %}





{% assign image = product.metafields.custom.image_with_text_section_image %}
{% assign title = product.metafields.custom.image_with_text_section_title %}
{% assign content = product.metafields.custom.image_with_text_section_content %}
{% assign pro_img = product.featured_image | img_url: '' %}

{% assign section_1_title = product.metafields.custom.section_1_title %}
{% assign section_1_image = product.metafields.custom.section_1_image %}
{% assign section_description_01 = product.metafields.custom.section_description_01 %}

{% if image or title or content or section_1_title or section_description_01 %}
  <div class="custom_img_text" style="background-color:{{ section.settings.bg }}">
    <div class="container">

      {%- comment -%}
      ======== FIRST SECTION (Image Left + Text Right) ========
      {%- endcomment -%}
      {% if image or title or content %}
        <div class="custom_section_row">
          
          <div class="custom_section_col text_col">
            {% if title %}
              <h2>{{ title }}</h2>
            {% endif %}
            {% if content %}
              <div class="custom_imgtext_content">
                {{ content | metafield_tag }}
              </div>
            {% endif %}
          </div>
          {% if image %}
            <div class="custom_section_col image_col">
              <img src="{{ image | file_url }}" alt="{{ title }}">
            </div>
          {% elsif pro_img %}
            <div class="custom_section_col image_col">
              <img src="{{ pro_img }}" alt="{{ title }}">
            </div>
          {% endif %}
        </div>
      {% endif %}

      {%- comment -%}
      ======== SECOND SECTION (Image Left + Text Right) ========
      {%- endcomment -%}
      {% if section_1_image or section_1_title or section_description_01 %}
        <div class="custom_section_row">
          {% if section_1_image %}
            <div class="custom_section_col image_col">
              <img src="{{ section_1_image | file_url }}" alt="{{ section_1_title }}">
            </div>
          {% endif %}
          <div class="custom_section_col text_col">
            {% if section_1_title %}
              <h2>{{ section_1_title }}</h2>
            {% endif %}
            {% if section_description_01 %}
              <p>{{ section_description_01 }}</p>
            {% endif %}
          </div>
        </div>
      {% endif %}

    </div>
  </div>
{% endif %}





{% schema %}
{
  "name": "Custom Img Text",
  "settings": [
    {
      "type": "color",
      "label": "Background Color",
      "id": "bg"
    }
  ]
}
{% endschema %}

<style>
  .custom_img_text .container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 50px;
    flex-direction: column;
}
.custom_section_row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 40px;
  margin-bottom: 60px;
  flex-wrap: wrap;
}

.custom_section_col {
  flex: 1 1 48%;
}

.custom_section_col.image_col img {
  width: 100%;
  height: auto;
  border-radius: 10px;
}

.custom_section_col.text_col h2 {
  font-size: 28px;
  margin-bottom: 15px;
  font-weight: 600;
}

.custom_section_col.text_col p,
.custom_section_col.text_col .custom_imgtext_content {
  font-size: 16px;
  line-height: 1.6;
  color: #333;
}
</style>
